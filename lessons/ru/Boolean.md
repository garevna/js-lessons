# ![ico-35 study] Логические конструкции языка

В это разделе мы познакомимся с логическими значениями, логическими переменными, логическими выражениями и логическими операторами.

## ![ico-30 icon] Переменные логического типа (boolean)

Когда человек заявляет, что его сыну 18 лет, то это выражение будет правдой в течение одного года, а до этого года и после этого года это выражение станет ложью. И то при условии, что у этого человека есть сын.

![](illustrations/logical-expressions.svg)

Предположим, что это утверждение человек написал на своей странице в социальных сетях, когда ему было 15 лет.
У него еще не было сына, и это утверждение было ложью.
Потом он повзрослел, женился и у него родился сын, но это утверждение оставалось ложью, потому что его сыну еще не было 18 лет.
Наконец, когда его сыну исполнилось 18, это утверждение стало истиной.
Но это продолжалось один год.
Потом его сыну исполнилось 19, и это утвеждение опять стало ложным.

Таким образом, это утверждение является **переменной**. Ведь его значение может меняться.
Значения, которые может принимать эта переменная - "истина" (**~true~**) или "ложь" (**~false~**).
**~true~** и **~false~** - это **логические значения**.

![ico-25 warn] **Других логических значений не существует.**
^^У нас нет такого лукавого значения, как "Не все так однозначно". Все однозначно. Или черное, или белое. Наш мир прост.^^

Итак, наша переменная может принимать одно из двух возможных логических значений (**~true~** или **~false~**).
Это переменная **логического типа** (**~boolean~**).

______________________________________

## ![ico-30 icon] Логические выражения

Утверждение "_Яблоко красное и круглое_" можно разложить на две части: "_Яблоко красное_" + "_Яблоко круглое_".

![](illustrations/logical-expressions-1.svg)

Т.е. фактически мы имеем дело с двумя логическими переменными, каждая из которых принимает логическое значение, т.е. является переменной логического типа.

◘◘ ![ico-25 coffee] ** 1**◘◘
~~~js
var apple = {
  color: 'yellow',
  shape: 'square'
}
~~~

Пусть логическая переменная **~appleIsRed~** принимает значение **~true~**, когда свойство **~apple.color~** имеет значение 'red', а логическая переменная **~appleIsRound~** принимает значение **~true~**, когда свойство **~apple.shape~** имеет значение 'round'.

Переменная **~appleIsRedAndRound~** принимает значение **~true~**, когда свойство **~apple.color~** имеет значение 'red', а свойство **~apple.shape~** имеет значение 'round'.

| apple.color | apple.shape | appleIsRed | appleIsRound | appleIsRedAndRound |
|   'red'     |   'round'   |   ~true~   | ~true~       |   ~true~           |
|   'yellow'  |   'round'   |   ~false~  | ~true~       |   ~false~          |
|   'red'     |   'square'  |   ~true~   | ~false~      |   ~false~          |
|   'green'   |   'square'  |   ~false~  | ~false~      |   ~false~          |

Тогда переменная **~appleIsRedAndRound~** уже является **логическим выражением**, поскольку требует вычисления ее значения на основе значений переменных **~appleIsRed~** и **~appleIsRound~**.

И это логическое выражение будет иметь значение **~true~** только тогда, когда обе переменные **~appleIsRed~** и **~appleIsRound~** будут иметь значение **~true~**.

**Логическое выражение** - это выражение, в результате вычисления которого будет получено логическое значение.

Простейшим случаем логического выражения является логическое значение.

Давайте посмотрим, как можно построить более сложные логические выражения.

_________________________________________________________________________

### ![ico-25 icon] Операторы сравнения

Самый простой способ построения логических выражений - это использование **операторов сравнения**.
Это бинарные операторы, т.е. они имеют два операнда.
Операнды могут быть переменными или выражениями.
![ico-25 warn] Операторы сравнения сравнивают не только **значения**, но и **типы данных** операндов.
Операторы сравнения всегда возвращают **логическое значение**.

| Оператор | Описание |
| **~==~** | нестрогое равенство ^^(сравниваются только значения операндов, под капотом происходит приведение типов данных)^^ |
| **~===~** | строгое равенство ^^(сравниваются типы данных операндов, и если тип данных операндов один и тот же, то сравниваются значения операндов)^^ |
| **~!=~** | нестрогое неравенство ^^(значения не равны, тип данных игнорируется)^^ |
| **~!==~** | строгое неравенство ^^(не равны не только  значения, но и типы данных)^^ |
| **~ > ~** | больше |
| **~ < ~** | меньше |
| **~>=~** | больше или равно |
| **~<=~** | меньше или равно |

Сравнение строк происходит посимвольно.
Каждый символ имеет числовой код, и сравниваются коды символов.
Если первые символы строк-операндов равны, то сравниваются следующие символы, и так до тех пор, пока один из сиволов не окажется больше или меньше второго.

§§§§ Demo | boolean_01_template §§§§

_________________________________________________________________________

### ![ico-30 hw] Тесты

◘◘![ico-25 hw]** 1**◘◘

→→→ 5 > '4' | true, false | true→→→

◘◘![ico-25 hw]** 2**◘◘

→→→ 5 !== '5' | true, false | true→→→

◘◘![ico-25 hw]** 3**◘◘

→→→ 10 != '10' | true, false | false→→→

◘◘![ico-25 hw]** 4**◘◘

→→→ true != 1 | true, false | false→→→

◘◘![ico-25 hw]** 5**◘◘

→→→ true !== '1' | true, false, 'Не все так однозначно' | true→→→

◘◘![ico-25 hw]** 6**◘◘

→→→ true <= 1 | true, false | true→→→

◘◘![ico-25 hw]** 7**◘◘

→→→ 'abc' < 'cde' | true, false | true→→→

◘◘![ico-25 hw]** 8**◘◘

→→→ 'Welcome!'.length < 'How are you?'.length | true, false | true→→→

__________________________________________________________________________

## ![ico-30 icon] Логические операторы

Логических операторов в JS три: **логическое умножение**, **логическое сложение** и **логическое отрицание**.

Оператор **логического отрицания** - это унарный оператор, т.е. он имеет всего один операнд.
Логические операторы "и" и "или" - это бинарные операторы, у них два операнда.

Логическое отрицание всегда возвращает логическое значение, даже если операнд не является логическим выражением (или логическим значением).
Операторы **логического умножения**, **логического сложения** не всегда возвращают логическое значение.

При выполнении логических операций под капотом движок приводит операнды к типу данных **~boolean~**.
Это называется [►►►**неявное приведение типов**►►►](page/Implicit-type-conversion).

Поскольку приведение к типу **~boolean~** является достаточно простым, мы можем немного "забежать вперед":

1. Пустая строка приводится к **~false~**. Если длина строки больше 0, то такая строка будет приведена к **~true~** независимо от того, какие символы есть в этой строке.
2. Числа, отличные от 0 и **~NaN~**, приводятся к **~true~**, а 0 и **~NaN~** приводятся к **~false~**.
3. **~null~** и **~undefib=ned~** приводятся к **~false~**.
4. Любые структуры данных (массивы, объекты) всегда приводятся к **~true~**, независимо от содержимого этих структур данных или полного отсутствия содержимого.

_____________________________________________

### ![ico-25 icon] Оператор отрицания

Утверждение "Яблоко не красное" является отрицанием утверждения "Яблоко красное".
Т.е. яблоко может быть любого цвета, только не красного.
Если вернуться к примеру 1:

~~~js
var apple = {
  color: 'yellow',
  shape: 'square'
}

var appleIsRed = apple.color === 'red'
var appleIsRound = apple.shape === 'round'
~~~

то новая переменная логического типа **~appleIsNotRed~** может быть вычислена на основании значения переменной **~appleIsRed~** путем отрицания.

Для логического отрицания в JS используется символ **~ !~** (восклицательный знак):

~~~js
var appleIsNotRed = !appleIsRed
~~~

![ico-25 warn] Логическое отрицание всегда возвращает **логическое значение** независимо от типа данных операнда.
Т.е. каким бы ни был тип данных операнда, оператор **~ !~** всегда вернет логическое значение **~true~** или **~false~**.

◘◘![ico-25 coffee] ** 2**◘◘

~~~js
!(5 > 8)    // true

// explanation:

5 > 8      // false,
!false     // true
~~~

◘◘![ico-25 coffee] ** 3**◘◘

~~~js
!(5 > 4)   // false

// explanation:

5 > 4      // true,
!true      // false
~~~

§§§§ Demo | boolean_02_template §§§§

____________________________________________________________

### ![ico-25 icon] Логическое умножение

Синтаксис: ~operand1 **&&** operand2~

Вернемся к примеру 1:

~~~js
var apple = {
  color: 'yellow',
  shape: 'square'
}

var appleIsRed = apple.color === 'red'
var appleIsRound = apple.shape === 'round'
~~~

Если оба операнда являются логическими выражениями (или логическими переменными), то результат будет иметь тип данных ~boolean~.

~~~js
var appleIsRedAndRound = appleIsRed && appleIsRound
~~~

§§§§ Demo | boolean_03_template §§§§

В следующих примерах мы используем логический оператор **~&&~** к операндам, которые являются **логическими выражениями**.
Логические выражения мы строим с помощью операторов сравнения.

◘◘![ico-25 coffee] ** 4**◘◘

~~~js
5 > 8 && 4 < 5   // false  
// explanation:
5 > 8            // false
4 < 5            // true
false && true    // false
~~~

◘◘![ico-25 coffee] ** 5**◘◘

~~~js
8 < 5 && 4 < 5   // false
// explanation:
8 > 5            // false
4 < 5            // true
false && true    // false
~~~

◘◘![ico-25 coffee] ** 6**◘◘

~~~js
var x = 4, y = 10, z = 8

x > y && z < y   // false
// explanation:
x > y            // false,
z < y            // true,
false && true    // false
~~~

◘◘![ico-25 coffee] ** 7**◘◘

~~~js
var x = 4, y = 10, z = 8

x < y && z < y   // true
// explanation:
x < y            // true,
z < y            // true,
true && true     // true
~~~

Однако это JS, и мы можем применять логические операторы к данным любого типа.
В этом случае начинает работать [►►►**неявное приведение типов**►►►](page/Implicit-type-conversion), т.е. операнды приводятся к логическому типу, после чего вычисляется значение выражения следующим образом: если логическое значение первого операнда (после приведения его к логическому типу данных) ~false~, то возвращается значение первого операнда, в противном случае возвращается значение второго операнда.

§§§§ Demo | boolean_04_template §§§§

Для более сложных выражений:

![](illustrations/logical-operators.svg)

Обратите внимание на тот факт, что использование логического оператора **~&&~** не определяет однозначно тип результата.
Тип данных значения, которое будет получено движком в результате вычисления выражения, зависит от типа данных операндов.

§§§§ Demo | boolean_05_template §§§§

_________________________________________________

### ![ico-25 icon] Логическое сложение

Синтаксис: ~operand1 **||** operand2~

§§§§ Demo | boolean_06_template §§§§

◘◘![ico-25 coffee] ** 8**◘◘

~~~js
5 > 8 || 4 < 5   // true

// explanation:

5 > 8            // false,
4 < 5            // true,
false || true    // true
~~~

◘◘![ico-25 coffee] ** 9**◘◘

~~~js
5 > 8 || 4 > 5   // false

// explanation:

5 > 8            // false,
4 > 5            // false,
false || false   // false
~~~

◘◘![ico-25 coffee] **10**◘◘

~~~js
var x = 4, y = 10, z = 8

x > y || z < y   // true

// explanation:

x > y            // false,
z < y            // true,
false || true    // true
~~~

◘◘![ico-25 coffee] **11**◘◘

~~~js
x > y || z > y   // false

// explanation:

x > y            // false,
z > y            // false,
false || false   // false
~~~

Итак, логическое сложение работает по принципу: если после приведения к типу данных **~boolean~** **хотя бы одного из операндов** будет получено **~true~**, то все выражение будет иметь значение **~true~**. Поскольку значения остальных операндов уже не изменят результат, то движок останавливается на первом же операнде, который после приведения типов даст **~true~**. Однако оператор **~||~** возвращает не **~true~**, а исходное значение операнда.

![](illustrations/logical-operators-1.svg)

◘◘![ico-25 coffee] **12**◘◘

~~~js
var object = {
  color: 'yellow',
  shape: 'square',
  size: 100
}

var test = object.color === 'red' || object.shape === 'circle' || object.size > 50
~~~

~~~console
true
~~~
_________________________________________________________________________

![ico-25 exclamation] Независимо от типа данных и значения переменной **~test~**:

~~~js
!test || !!test    // всегда  true

!test && !!test    // всегда  false
~~~

_________________________________________________________________________

### ![ico-25 icon] Tests

◘◘![ico-25 hw] ** 1**◘◘

~~~js
var x = undefined
~~~

→→→ x ◧ !x | undefined, null, true, false | true →→→

◘◘![ico-25 hw] ** 2**◘◘

~~~js
var x = undefined
~~~

→→→ x && !x | undefined, null, true, false | undefined →→→

◘◘![ico-25 hw] ** 3**◘◘

~~~js
var x = null
~~~

→→→ x ◧ !x | undefined, null, true, false | true →→→

◘◘![ico-25 hw] ** 4**◘◘

~~~js
var x = null
~~~

→→→ x && !x | undefined, null, true, false | null →→→

◘◘![ico-25 hw] ** 5**◘◘

~~~js
var x = NaN
~~~

→→→ x ◧ !x | NaN, null, true, false | true →→→

◘◘![ico-25 hw] ** 6**◘◘

~~~js
var x = NaN
~~~

→→→ x && !x | NaN, null, true, false | NaN →→→

◘◘![ico-25 hw] ** 7**◘◘

~~~js
var x = 5
~~~

→→→ x ◧ !x | NaN, null, 5, true, false | 5 →→→

◘◘![ico-25 hw] ** 8**◘◘

~~~js
var x = 5
~~~

→→→ x && !x | NaN, null, 5, true, false | false →→→


◘◘![ico-25 hw] ** 9**◘◘

~~~js
var x = 'Hi!'
~~~

→→→ x ◧ !x | undefined, 'Hi!', true, false | Hi! →→→


◘◘![ico-25 hw] **10**◘◘

~~~js
var x = 'Hi!'
~~~

→→→ x && !x | undefined, 'Hi!', true, false | false →→→

◘◘![ico-25 hw] **11**◘◘

~~~js
var x = ''
~~~

→→→ x ◧ !x | undefined, '""', true, false | true →→→


◘◘![ico-25 hw] **12**◘◘

~~~js
var x = ''
~~~

→→→ x && !x | undefined, '""', true, false | "" →→→


◘◘![ico-25 hw] **13**◘◘

~~~js
var x = 4, y = 10
~~~

→→→ (x > y) ◧ (x < 5) | 4, 10, true, false | true →→→


◘◘![ico-25 hw] **14**◘◘

~~~js
var x = 4, y = 10
~~~

→→→ (x > y) && (x < 5) | 4, 10, true, false | false →→→


◘◘![ico-25 hw] **15**◘◘

~~~js
var students = ['Piter', 'Anna', 'Demid', 'Josef']
~~~

→→→ students.length && students[1] | 4, 'Piter', 'Anna', 'Demid', 'Josef', true, false | Anna →→→


◘◘![ico-25 hw] **16**◘◘

~~~js
var students = ['Piter', 'Anna', 'Demid', 'Josef']
~~~

→→→ students.length ◧ students[2] | 4, 'Piter', 'Anna', 'Demid', 'Josef', true, false | 4 →→→


◘◘![ico-25 hw] **17**◘◘

~~~js
var students = ['Piter', 'Anna', 'Demid', 'Josef']
~~~

→→→ students.length > 4 ◧ students[2] | 4, 'Piter', 'Anna', 'Demid', 'Josef', true, false | Demid →→→


◘◘![ico-25 hw] **18**◘◘

~~~js
var array = [true, 'Google', NaN, undefined]
~~~

→→→ array.length > 4 ◧ typeof array[2] | 4, 'string', 'number', 'boolean', 'object', true, false | number →→→

◘◘![ico-25 hw] **19**◘◘

~~~js
var array = [true, 'Google', NaN, undefined]
~~~

→→→ array.length > 4 ◧ typeof array[2] | 4, 'string', 'number', 'boolean', 'object', true, false | number →→→


◘◘![ico-25 hw] **20**◘◘

~~~js
var alpha = NaN
var betta = typeof alpha
~~~

→→→ b === 'number' | NaN, 'number', 'boolean', true, false | true →→→


◘◘![ico-25 hw] **21**◘◘

~~~js
var alpha = NaN
var betta = typeof alpha === 'string'
~~~

→→→  !a && !b | NaN, true, false | true →→→
