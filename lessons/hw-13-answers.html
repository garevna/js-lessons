<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
    <meta charset="utf-8">
    <link rel="shortcut icon" href="https://garevna.github.io/a-level-js-lessons/src/icons/a-level-ico.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <script src="../rainbow.js"></script>
    <link rel="stylesheet" href="../for-rainbow.css">
    <title>Homework 13</title>
    <style>
        body { font-family: Roboto, Arial;  }
        pre { padding: 8px 16px; }
        h1, h2 {
          color: white;
          padding: 4px 8px;
          max-width: 100px;
          background: #079;
          text-align: center;
        }
        h4 { color: #f50; }
    </style>
  </head>
  <body>
    <h1>1</h1>
    <pre>
      <code language="js">
easy...
      </code>
    </pre>

    <h1>2</h1>
    <pre>
      <code language="js">
var addElem = tagName => document.body.appendChild (
  document.createElement ( tagName )
)

var selector = addElem ( 'input' )

selector.type = 'file'
selector.multiple = true
selector.id = 'selectImages'
selector.style.display = 'none'

var label = addElem ( 'label' )

label.htmlFor = 'selectImages'
label.innerText = 'Select images'

var testFile = file => new Promise (
  ( resolve, reject ) => {
      if ( file.type.indexOf ( "image/" ) < 0 ) {
          reject ( `файл ${file.name} не является изображением` )
          return
      }
      var fileReader = new FileReader ()
      fileReader.readAsDataURL ( file )
      fileReader.onload = event =>
          resolve ( event.target.result )
      fileReader.onerror = event =>
          reject ( `Error: ${file.name}` )
  }
)


selector.onchange = function ( event ) {
  for ( var file of event.target.files ) {
      testFile ( file )
          .then ( result => addElem ( "img" ).src = result )
          .catch ( error => console.error ( error ) )
  }
}
    </code>
  </pre>
    <h1>3</h1>
    <pre>
      <code language="js">
        easy...
      </code>
    </pre>
  </body>
</html>
