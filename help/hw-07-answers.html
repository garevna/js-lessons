<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
    <meta charset="utf-8">
    <link rel="shortcut icon" href="https://garevna.github.io/a-level-js-lessons/src/icons/a-level-ico.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <script src="../rainbow.js"></script>
    <link rel="stylesheet" href="../for-rainbow.css">
    <title>Homework 7</title>
    <style>
        body { font-family: Roboto, Arial;  }
        pre { padding: 8px 16px; }
        h1, h2 {
          color: white;
          padding: 4px 12px;
          max-width: 100px;
          background: #079;
          text-align: center;
        }
        h4 { color: #f50; }
    </style>
  </head>
  <body>
    <h1>2</h1>
    <hr>
    <pre>
      <code data-language="js">
var collection = []

function enter_or_leave (event) {
  event.target
    .style
    .backgroundColor = event.type === 'mouseover' ? '#ffff0050' : '#ff00ff50'
}

function clickHandler (event) {
  ;['mouseover', 'mouseout'].forEach(eventType => elem.removeEventListener(eventType, enter_or_leave))
  event.target.remove()
}

;['first', 'second', 'third', 'fourth']
  .forEach(function (tag, index, arr) {
    var elem = (collection.length === 0 ? document.body : collection[collection.length - 1])
      .appendChild(document.createElement('div'))
    collection.push(elem)
    elem.style = `
      width:  ${(arr.length - index) * 50}px;
      height: ${(arr.length - index) * 50}px;
      background-color: #ff00ff50;
    `
    elem.title = tag
    ;['mouseover', 'mouseout'].forEach(eventType => elem.addEventListener(eventType, enter_or_leave))
    elem.onclick = clickHandler
	}
)
      </code>
    </pre>
    <hr>
    <h1>3</h1>
    <hr>
    <pre>
      <code data-language="js">
var collection = []

function enter_or_leave ( event ) {
  event.target
    .style
    .backgroundColor = event.type === 'mouseover' ? '#ffff0050' : '#ff00ff50'
}

function clickHandler (event) {
  event.stopPropagation()
  event.target.removeEventListener('mouseover', enter_or_leave)
  event.target.removeEventListener('mouseout', enter_or_leave)
  event.target.outerHTML = event.target.innerHTML
}

;[1, 2, 3, 4, 5, 6, 7].forEach(function (tag, index, arr) {
  var elem = (collection.length === 0 ? document.body : collection[collection.length - 1])
    .appendChild(document.createElement('div'))
  collection.push(elem)
  elem.style = `
    width:  ${( arr.length - index ) * 50}px;
    height: ${( arr.length - index ) * 50}px;
    background-color: #ff00ff50;
    border: dotted 1px yellow;
  `
  elem.title = tag
  elem.addEventListener('mouseover', enter_or_leave)
  elem.addEventListener('mouseout', enter_or_leave)
  elem.onclick = clickHandler
})
      </code>
    </pre>
    <hr>
  </body>
</html>
